{"version":3,"file":"conversation-tracer.js","sourceRoot":"","sources":["../../src/trace/conversation-tracer.ts"],"names":[],"mappings":"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"}