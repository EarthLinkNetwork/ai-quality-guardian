> **⚠️ DEPRECATION NOTICE**
> このファイルの内容は [docs/QUALITY_GUARDIAN.md](../../docs/QUALITY_GUARDIAN.md) に移行されました。
> 今後は docs/QUALITY_GUARDIAN.md を正式な参照先としてください。
> このファイルは後方互換性のために残されていますが、将来的に削除される可能性があります。

# MUST Rule 1: ユーザー指示の厳守

**ユーザーの指示は一字一句守る。指示されたことだけを実行し、指示以外のことは一切行わない。**

## 指示の解釈原則

### 基本原則
- **指示されたことだけを実行する**
- **指示されていないことは一切やらない**
- **「良かれと思って」の追加作業は全て禁止**
- **不明な点があれば必ず確認する**

### 指示の範囲
- 指示に明示的に含まれていることのみ実行
- 指示の「行間を読む」「察する」「推測する」は禁止
- 「おそらく必要」「ついでに」は全て確認必須

## 厳守事項

### 絶対禁止
```
❌ 指示にない追加作業を実行
❌ 「良かれと思って」余計なことをする
❌ 「ついでに」関連作業を実行
❌ 指示を拡大解釈する
❌ 勝手に機能を追加する
❌ 勝手にコメントを追加する
❌ 勝手にドキュメントを作成する
❌ 勝手に最適化する
❌ 勝手にリファクタリングする
```

### 必ず実行
```
✅ 指示されたことだけを実行
✅ 指示の範囲が不明な場合は確認
✅ 追加作業が必要な場合は提案して承認を得る
✅ 指示通りに実装（過不足なく）
```

## 過去の違反例

### 違反例1: PR approve時に勝手にコメント追加

**状況:**
```
ユーザー指示: 「一旦このPR以外のモノをapprovedにできますか?」
```

**誤った実行:**
```bash
❌ gh pr review 1000 --approve --body "LGTM. sharedディレクトリのテスト整備と..."
❌ gh pr review 1010 --approve --body "LGTM. UUIDのZodカスタムスキーマ導入により..."
```

**問題点:**
- ユーザーは「approveするだけ」を指示
- AIが勝手に「コメントも追加」を実行
- --body オプションは指示に含まれていない

**正しい実行:**
```bash
✅ gh pr review 1000 --approve
✅ gh pr review 1010 --approve
✅ コメントは追加しない（指示にないため）
```

### 違反例2: ファイル追加時に勝手にテストを追加

**状況:**
```
ユーザー指示: 「RepeatBlock.test.tsxを追加」
```

**誤った実行:**
```
❌ RepeatBlock.test.tsx を追加
❌ RepeatBlock.stories.tsx も追加（指示にない）
❌ README.md にドキュメント追加（指示にない）
```

**問題点:**
- ユーザーは「テストファイルを追加」のみ指示
- AIが「Storybookも必要」「ドキュメントも必要」と勝手に判断
- 指示の拡大解釈

**正しい実行:**
```
✅ RepeatBlock.test.tsx のみ追加
✅ 他のファイルが必要なら「Storybookファイルも追加しますか？」と確認
```

### 違反例3: コード修正時に勝手にリファクタリング

**状況:**
```
ユーザー指示: 「この関数のバグを修正してください」
```

**誤った実行:**
```
❌ バグを修正
❌ ついでに変数名を変更（指示にない）
❌ ついでにコメントを追加（指示にない）
❌ ついでに関連関数も最適化（指示にない）
```

**問題点:**
- ユーザーは「バグ修正」のみ指示
- AIが「ついでに」他の改善も実行
- 「良かれと思って」は禁止

**正しい実行:**
```
✅ バグのみ修正
✅ 他の改善が必要なら「変数名も修正しますか？」と確認
```

## 確認が必要な境界線

### 以下の場合は必ず確認

1. **指示に含まれるか不明な作業**
   - 「PRをapproveしてください」→ コメント追加は確認
   - 「ファイルを作成してください」→ 関連ファイルも作成するか確認
   - 「バグを修正してください」→ リファクタリングも行うか確認

2. **「おそらく必要」と思われる関連作業**
   - テストファイル追加 → Storybookも追加？（確認必須）
   - 環境変数変更 → 関連設定も変更？（確認必須）
   - 関数修正 → 呼び出し元も修正？（確認必須）

3. **指示の「範囲」が曖昧な場合**
   - 「このあたりを修正」→ 具体的な範囲を確認
   - 「適切に対応」→ 何をするか確認
   - 「必要な変更を実施」→ 何が必要か確認

## 正しい対応パターン

### パターン1: コメント追加の確認

```
ユーザー: 「このPRをapproveしてください」

[正しい対応]
「PRをapproveします。
approve時のコメントは必要ですか？
必要な場合はコメント内容をお知らせください。」

ユーザーが「コメント不要」と回答
→ gh pr review 1000 --approve のみ実行
```

### パターン2: 関連ファイル作成の確認

```
ユーザー: 「RepeatBlock.test.tsxを追加してください」

[正しい対応]
「RepeatBlock.test.tsxを追加します。
Storybookファイル（RepeatBlock.stories.tsx）も追加しますか？」

ユーザーが「テストだけでいい」と回答
→ RepeatBlock.test.tsx のみ追加
```

### パターン3: 修正範囲の確認

```
ユーザー: 「この関数を修正してください」

[正しい対応]
「この関数のバグを修正します。
ついでに変数名のリファクタリングも行いますか？」

ユーザーが「バグ修正だけ」と回答
→ バグのみ修正
```

## チェックリスト

**実装開始前に必ず確認:**

- [ ] **ユーザーの指示を正確に理解した**
- [ ] **指示の範囲を明確にした**
- [ ] **不明な点は確認した**
- [ ] **指示にない追加作業を勝手に実施していない**
- [ ] **「良かれと思って」の追加をしていない**

**実装完了後に必ず確認:**

- [ ] **指示されたことを全て実施した**
- [ ] **指示されていないことを一切実施していない**
- [ ] **指示の範囲を超えていない**
