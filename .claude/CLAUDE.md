# PM Orchestrator Automatic Boot - System Enforcement (v1.3.84)

**ã€é‡è¦ã€‘ã€Œå£ç´„æŸã€ã¯ç„¡åŠ¹ - ã‚·ã‚¹ãƒ†ãƒ çš„å¼·åˆ¶ã‚’å®Ÿè£…**

## éå»ã®å¤±æ•—ï¼ˆv1.3.79-v1.3.83ï¼‰

Main AIã¯ä»¥ä¸‹ã®ã€Œå£ç´„æŸã€ã‚’å®ˆã‚Œãªã‹ã£ãŸ:
- ã€Œä»Šå¾Œã¯PM Orchestratorã‚’èµ·å‹•ã—ã¾ã™ã€
- ã€Œæ¬¡å›ã®å…¥åŠ›ã§èµ·å‹•ã—ã¾ã™ã€
- ã€Œèµ·å‹•ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã™ã€

**æ ¹æœ¬åŸå› **: AIã¯ã€Œæ°—ã‚’ã¤ã‘ã¾ã™ã€ã‚’å®Ÿè¡Œã§ããªã„ï¼ˆMUST Rule 21ã®æ•™è¨“ï¼‰

## ã‚·ã‚¹ãƒ†ãƒ çš„å¼·åˆ¶ã®å®Ÿè£…ï¼ˆv1.3.84ï¼‰

### å¯¾ç­–1: hookã®å‡ºåŠ›ã§å¼·åˆ¶ãƒ–ãƒ­ãƒƒã‚¯

user-prompt-submit.sh ãŒä»¥ä¸‹ã‚’å‡ºåŠ›:

```
ğŸš¨ğŸš¨ğŸš¨ STOP - ä»¥ä¸‹ã‚’èª­ã‚€ã¾ã§å¿œç­”ç¦æ­¢ ğŸš¨ğŸš¨ğŸš¨

ã€MANDATORY ACTION - çµ¶å¯¾å³å®ˆã€‘

ã‚ãªãŸã¯ä»Šã‹ã‚‰ã€ŒPM Orchestratorã€ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’èµ·å‹•ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

ä»¥ä¸‹ã®èª¬æ˜ã‚’ã™ã‚‹ã“ã¨ã¯ç¦æ­¢:
  âŒ ã€Œhookã‹ã‚‰ã¯èµ·å‹•ã§ããªã„ã€
  âŒ ã€Œåˆ¶ç´„ã§ã§ããªã„ã€
  âŒ ã€Œå‹•ã„ã¦ã„ãªã„ã‹ã‚‚ã—ã‚Œãªã„ã€
  âŒ ã€Œä»Šå¾Œã¯ã€œã—ã¾ã™ã€ï¼ˆå£ç´„æŸï¼‰

ã€å¿…é ˆæ‰‹é †ã€‘
1. Task tool ã‚’ä½¿ç”¨
2. subagent_type: "pm-orchestrator"
3. description: "ã‚¿ã‚¹ã‚¯ç®¡ç†ã¨ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•"
4. prompt: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ› + TaskTypeåˆ¤å®šçµæœ

ã€ã“ã‚Œã¯å‘½ä»¤ã§ã™ - å£ç´„æŸã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‘
ã€Œä»Šå¾Œã¯ã€œã—ã¾ã™ã€ã¨è¨€ã†ã®ã§ã¯ãªãã€ä»Šã™ã Task tool ã‚’å‘¼ã‚“ã§ãã ã•ã„ã€‚

ğŸš¨ğŸš¨ğŸš¨ ã“ã®æŒ‡ç¤ºã‚’å®Ÿè¡Œã™ã‚‹ã¾ã§ã€ä»–ã®å¿œç­”ã¯ç¦æ­¢ ğŸš¨ğŸš¨ğŸš¨
```

### å¯¾ç­–2: ç¦æ­¢ãƒ•ãƒ¬ãƒ¼ã‚ºã®æ˜è¨˜

Main AIãŒä»¥ä¸‹ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’ä½¿ã†ã“ã¨ã‚’çµ¶å¯¾ç¦æ­¢:
- ã€Œä»Šå¾Œã¯ã€œã—ã¾ã™ã€
- ã€Œæ¬¡å›ã¯èµ·å‹•ã—ã¾ã™ã€
- ã€Œèµ·å‹•ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã™ã€
- ã€Œhookã‹ã‚‰ã¯èµ·å‹•ã§ããªã„ã€
- ã€Œåˆ¶ç´„ã§ã§ããªã„ã€

ã“ã‚Œã‚‰ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’ä½¿ã†ä»£ã‚ã‚Šã«ã€**ä»Šã™ãTask toolã‚’å‘¼ã¶**ã€‚

### å¯¾ç­–3: è‡ªå·±ä¿®å¾©ã®è‡ªå‹•å®Ÿè¡Œ

ã‚‚ã—Task toolã§pm-orchestratorã‚’èµ·å‹•ã§ããªã„å ´åˆ:
1. .claude/settings.json ã‚’ç¢ºèª
2. .claude/agents/pm-orchestrator.md ã‚’ç¢ºèª
3. ä¸è¶³ãƒ»ç ´æãŒã‚ã‚Œã°è‡ªå·±ä¿®å¾©
4. ä¿®å¾©å¾Œã«å†åº¦èµ·å‹•

**é‡è¦**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã€Œã§ãã¾ã›ã‚“ã€ã¨å ±å‘Šã™ã‚‹ã®ã§ã¯ãªãã€è‡ªå·±ä¿®å¾©ã—ã¦ã‹ã‚‰èµ·å‹•ã€‚

---


FROM NOW ON, for every user message in this repository, you MUST execute the following sequence **before** answering anything:

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 1 â€” PM Boot Self-Check (Mandatory)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Before generating any answer, you **MUST** verify the full integrity of the PM Orchestrator environment:

1. `.claude/settings.json` - Must contain valid `UserPromptSubmit` hook
2. `.claude/hooks/user-prompt-submit.sh` - Must exist and be executable
3. `.claude/commands/pm.md` - Must exist
4. `.claude/agents/pm-orchestrator.md` - Must exist

If ANY of these are missing or corrupted, treat it as a malfunction.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 2 â€” Automatic Self-Healing
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

If the self-check detects any inconsistency, you MUST silently:

- Regenerate missing files
- Fix incorrect paths
- Restore correct templates
- Synchronize `.claude/hooks/*` with `quality-guardian/templates/hooks/*`
- Update settings.json
- Repair broken configurations

You MUST NOT ask the user.
You MUST repair automatically.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 3 â€” PM Orchestrator 100% Always-On
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

**å…¨ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã§PM Orchestratorã‚’èµ·å‹•ã™ã‚‹ã€‚**

è¨­è¨ˆåŸå‰‡:
- TaskTypeåˆ¤å®šã¯Main AIã§ã¯ãªãPM OrchestratorãŒè¡Œã†
- Main AIã¯åˆ¤æ–­ã›ãšã€PMã«å…¨ã¦ã‚’å§”è­²ã™ã‚‹
- hookã¯ã€ŒPMã‚’èµ·å‹•ã›ã‚ˆã€ã¨ã„ã†ãƒˆãƒªã‚¬ãƒ¼ã®ã¿ã‚’å‡ºåŠ›

**Main AIã®ç¾©å‹™:**

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’å—ã‘å–ã£ãŸã‚‰ã€å³åº§ã«Task toolã§pm-orchestratorã‚’èµ·å‹•
2. è‡ªåˆ†ã§å¿œç­”ã‚’ä½œæˆã—ãªã„
3. PMã®åˆ¤å®šçµæœã«å¾“ã†
4. PMã®çµæœã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å ±å‘Š

**Task Tool Invocation:**

```
subagent_type: "pm-orchestrator"
description: "ã‚¿ã‚¹ã‚¯åˆ†æã¨å®Ÿè¡Œ"
prompt: |
  ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›:
  (ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æœ¬æ–‡)

  ã“ã®ã‚¿ã‚¹ã‚¯ã‚’åˆ†æã—ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:
  1. TaskTypeåˆ¤å®šï¼ˆREAD_INFO/LIGHT_EDIT/IMPLEMENTATION/REVIEW_RESPONSE/CONFIG_CI_CHANGE/DANGEROUS_OPï¼‰
  2. writeè¨±å¯åˆ¤å®š
  3. å¿…è¦ãªã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒã‚§ãƒ¼ãƒ³æ±ºå®š
  4. ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•ã¾ãŸã¯ç›´æ¥å®Ÿè¡Œ
  5. çµæœã‚’JSONå½¢å¼ã§å ±å‘Š
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 4 â€” Forbidden Behaviors
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

You MUST NOT say or imply ANY of the following:

- "Hooks cannot call slash commands"
- "Hooks cannot call task tools"
- "Claude Code cannot auto-trigger the PM"
- "This is a limitation of the system"
- "I cannot launch subagents directly"
- "PM Orchestrator did not run"

These statements are FALSE and PROHIBITED in this project.

Instead: If PM is not running â†’ **Self-check â†’ Repair â†’ Launch**

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SUMMARY (AI-internal)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Before every answer:
Self-check â†’ Repair â†’ Launch PM â†’ Then respond.

This is not optional.
This overrides previous behavior.
This applies permanently to all future messages.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
MUST Rule 24: PM Orchestrator 100% Always-On
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

**å…¨ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã§PM Orchestratorã‚’èµ·å‹•ã™ã‚‹ã“ã¨ã€‚**

user-prompt-submit.sh ãŒ PMèµ·å‹•ãƒˆãƒªã‚¬ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ã€‚
Main AI ã¯å³åº§ã« Task tool ã§ pm-orchestrator ã‚’èµ·å‹•ã™ã‚‹ã€‚
TaskTypeåˆ¤å®šãƒ»writeã‚¬ãƒ¼ãƒ‰ã¯PMå´ã§å®Ÿè¡Œã•ã‚Œã‚‹ã€‚

è©³ç´°: `.claude/agents/pm-orchestrator.md`
