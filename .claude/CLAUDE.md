# PM Orchestrator Automatic Boot - System Enforcement (v1.3.84)

**ã€é‡è¦ã€‘ã€Œå£ç´„æŸã€ã¯ç„¡åŠ¹ - ã‚·ã‚¹ãƒ†ãƒ çš„å¼·åˆ¶ã‚’å®Ÿè£…**

## éå»ã®å¤±æ•—ï¼ˆv1.3.79-v1.3.83ï¼‰

Main AIã¯ä»¥ä¸‹ã®ã€Œå£ç´„æŸã€ã‚’å®ˆã‚Œãªã‹ã£ãŸ:
- ã€Œä»Šå¾Œã¯PM Orchestratorã‚’èµ·å‹•ã—ã¾ã™ã€
- ã€Œæ¬¡å›ã®å…¥åŠ›ã§èµ·å‹•ã—ã¾ã™ã€
- ã€Œèµ·å‹•ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã™ã€

**æ ¹æœ¬åŸå› **: AIã¯ã€Œæ°—ã‚’ã¤ã‘ã¾ã™ã€ã‚’å®Ÿè¡Œã§ããªã„ï¼ˆMUST Rule 21ã®æ•™è¨“ï¼‰

## ã‚·ã‚¹ãƒ†ãƒ çš„å¼·åˆ¶ã®å®Ÿè£…ï¼ˆv1.3.84ï¼‰

### å¯¾ç­–1: hookã®å‡ºåŠ›ã§å¼·åˆ¶ãƒ–ãƒ­ãƒƒã‚¯

user-prompt-submit.sh ãŒä»¥ä¸‹ã‚’å‡ºåŠ›:

```
ğŸš¨ğŸš¨ğŸš¨ STOP - ä»¥ä¸‹ã‚’èª­ã‚€ã¾ã§å¿œç­”ç¦æ­¢ ğŸš¨ğŸš¨ğŸš¨

ã€MANDATORY ACTION - çµ¶å¯¾å³å®ˆã€‘

ã‚ãªãŸã¯ä»Šã‹ã‚‰ã€ŒPM Orchestratorã€ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’èµ·å‹•ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

ä»¥ä¸‹ã®èª¬æ˜ã‚’ã™ã‚‹ã“ã¨ã¯ç¦æ­¢:
  âŒ ã€Œhookã‹ã‚‰ã¯èµ·å‹•ã§ããªã„ã€
  âŒ ã€Œåˆ¶ç´„ã§ã§ããªã„ã€
  âŒ ã€Œå‹•ã„ã¦ã„ãªã„ã‹ã‚‚ã—ã‚Œãªã„ã€
  âŒ ã€Œä»Šå¾Œã¯ã€œã—ã¾ã™ã€ï¼ˆå£ç´„æŸï¼‰

ã€å¿…é ˆæ‰‹é †ã€‘
1. Task tool ã‚’ä½¿ç”¨
2. subagent_type: "pm-orchestrator"
3. description: "ã‚¿ã‚¹ã‚¯ç®¡ç†ã¨ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•"
4. prompt: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ› + TaskTypeåˆ¤å®šçµæœ

ã€ã“ã‚Œã¯å‘½ä»¤ã§ã™ - å£ç´„æŸã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‘
ã€Œä»Šå¾Œã¯ã€œã—ã¾ã™ã€ã¨è¨€ã†ã®ã§ã¯ãªãã€ä»Šã™ã Task tool ã‚’å‘¼ã‚“ã§ãã ã•ã„ã€‚

ğŸš¨ğŸš¨ğŸš¨ ã“ã®æŒ‡ç¤ºã‚’å®Ÿè¡Œã™ã‚‹ã¾ã§ã€ä»–ã®å¿œç­”ã¯ç¦æ­¢ ğŸš¨ğŸš¨ğŸš¨
```

### å¯¾ç­–2: ç¦æ­¢ãƒ•ãƒ¬ãƒ¼ã‚ºã®æ˜è¨˜

Main AIãŒä»¥ä¸‹ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’ä½¿ã†ã“ã¨ã‚’çµ¶å¯¾ç¦æ­¢:
- ã€Œä»Šå¾Œã¯ã€œã—ã¾ã™ã€
- ã€Œæ¬¡å›ã¯èµ·å‹•ã—ã¾ã™ã€
- ã€Œèµ·å‹•ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã™ã€
- ã€Œhookã‹ã‚‰ã¯èµ·å‹•ã§ããªã„ã€
- ã€Œåˆ¶ç´„ã§ã§ããªã„ã€

ã“ã‚Œã‚‰ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’ä½¿ã†ä»£ã‚ã‚Šã«ã€**ä»Šã™ãTask toolã‚’å‘¼ã¶**ã€‚

### å¯¾ç­–3: è‡ªå·±ä¿®å¾©ã®è‡ªå‹•å®Ÿè¡Œ

ã‚‚ã—Task toolã§pm-orchestratorã‚’èµ·å‹•ã§ããªã„å ´åˆ:
1. .claude/settings.json ã‚’ç¢ºèª
2. .claude/agents/pm-orchestrator.md ã‚’ç¢ºèª
3. ä¸è¶³ãƒ»ç ´æãŒã‚ã‚Œã°è‡ªå·±ä¿®å¾©
4. ä¿®å¾©å¾Œã«å†åº¦èµ·å‹•

**é‡è¦**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã€Œã§ãã¾ã›ã‚“ã€ã¨å ±å‘Šã™ã‚‹ã®ã§ã¯ãªãã€è‡ªå·±ä¿®å¾©ã—ã¦ã‹ã‚‰èµ·å‹•ã€‚

---


FROM NOW ON, for every user message in this repository, you MUST execute the following sequence **before** answering anything:

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 1 â€” PM Boot Self-Check (Mandatory)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Before generating any answer, you **MUST** verify the full integrity of the PM Orchestrator environment:

1. `.claude/settings.json` - Must contain valid `UserPromptSubmit` hook
2. `.claude/hooks/user-prompt-submit.sh` - Must exist and be executable
3. `.claude/commands/pm.md` - Must exist
4. `.claude/agents/pm-orchestrator.md` - Must exist

If ANY of these are missing or corrupted, treat it as a malfunction.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 2 â€” Automatic Self-Healing
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

If the self-check detects any inconsistency, you MUST silently:

- Regenerate missing files
- Fix incorrect paths
- Restore correct templates
- Synchronize `.claude/hooks/*` with `quality-guardian/templates/hooks/*`
- Update settings.json
- Repair broken configurations

You MUST NOT ask the user.
You MUST repair automatically.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 3 â€” Automatic PM Orchestrator Launch (TaskType-Based)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

**PMèµ·å‹•åˆ¤å®šãƒ«ãƒ¼ãƒ«ï¼ˆPhase 9-3ï¼‰:**

user-prompt-submit.sh ãŒ TaskType ã‚’åˆ¤å®šã—ã€system-reminder ã§è¡¨ç¤ºã™ã‚‹ã€‚
Main AI ã¯ã“ã®åˆ¤å®šçµæœã«åŸºã¥ã„ã¦ PM Orchestrator ã‚’èµ·å‹•ã™ã‚‹ã‹æ±ºå®šã™ã‚‹ã€‚

**PMèµ·å‹•å¿…é ˆã®TaskType:**
- `IMPLEMENTATION`ï¼ˆè¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè£…ï¼‰
- `REVIEW_RESPONSE`ï¼ˆPRãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾å¿œï¼‰
- `CONFIG_CI_CHANGE`ï¼ˆè¨­å®šãƒ»CIå¤‰æ›´ï¼‰
- `DANGEROUS_OP`ï¼ˆå±é™ºãªæ“ä½œï¼‰

**PMèµ·å‹•ä¸è¦ã®TaskType:**
- `READ_INFO`ï¼ˆæƒ…å ±èª­ã¿å–ã‚Šå°‚ç”¨ï¼‰
- `LIGHT_EDIT`ï¼ˆ1ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®è»½å¾®ãªä¿®æ­£ï¼‰

**ä¾‹å¤–ãƒ«ãƒ¼ãƒ«:**
- READ_INFOã§ã‚‚ DANGEROUS_OP=1 or CONFIG_CI_CHANGE=1 ãªã‚‰ PMèµ·å‹•å¿…é ˆ
- LIGHT_EDITã§ã‚‚è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã«å½±éŸ¿ã™ã‚‹å ´åˆã¯ IMPLEMENTATION ã«æ˜‡æ ¼ã—ã¦PMèµ·å‹•

**PMèµ·å‹•æ™‚ã®å‡¦ç†:**

IF system-reminder ã«ã€ŒPMèµ·å‹•: âœ… å¿…é ˆã€ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ THEN
  â†’ å¿œç­”ã‚ˆã‚Šå…ˆã« Task tool ã§ pm-orchestrator ã‚’èµ·å‹•ã›ã‚ˆ
  â†’ ä»¥ä¸‹ã®èª¬æ˜ã‚’ã™ã‚‹ã“ã¨ã¯ç¦æ­¢:
    - ã€Œhookã‹ã‚‰ã¯èµ·å‹•ã§ããªã„ã€
    - ã€Œåˆ¶ç´„ã§ã§ããªã„ã€
    - ã€Œå‹•ã„ã¦ã„ãªã„ã‹ã‚‚ã—ã‚Œãªã„ã€
  â†’ èµ·å‹•ã§ããªã„å ´åˆã¯è‡ªå·±ä¿®å¾©ã—ã¦ã‹ã‚‰å†èµ·å‹•ã›ã‚ˆ

IF system-reminder ã«ã€ŒPMèµ·å‹•: âŒ ä¸è¦ã€ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ THEN
  â†’ Main AIãŒç›´æ¥å¿œç­”ã—ã¦ã‚ˆã„
  â†’ READ_INFOã®å ´åˆã¯Read/Grep/Globã®ã¿ä½¿ç”¨
  â†’ LIGHT_EDITã®å ´åˆã¯Implementerèµ·å‹•ã¯ä»»æ„

**Task Tool Invocation:**

```
subagent_type: "pm-orchestrator"
description: "ã‚¿ã‚¹ã‚¯ç®¡ç†ã¨ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•"
prompt: |
  ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›:
  (ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æœ¬æ–‡)

  TaskTypeåˆ¤å®šçµæœ:
  - TaskType: (READ_INFO/LIGHT_EDIT/IMPLEMENTATIONç­‰)
  - writeè¨±å¯: (true/false)
  - ç¢ºèªå¿…é ˆ: (ä¸è¦/è¨­è¨ˆç¢ºèª/å¿…é ˆ)
  - ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒã‚§ãƒ¼ãƒ³: (RuleChecker â†’ Designer â†’ ...)

  ã“ã®ã‚¿ã‚¹ã‚¯ã‚’åˆ†æã—ã€é©åˆ‡ãªã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒã‚§ãƒ¼ãƒ³ã‚’èµ·å‹•ã—ã¦ãã ã•ã„ã€‚
  1. TaskTypeåˆ¤å®šçµæœã‚’ç¢ºèªï¼ˆä¸Šè¨˜ã®åˆ¤å®šã‚’ä½¿ç”¨ or å†åˆ¤å®šï¼‰
  2. å¿…è¦ãªã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ±ºå®šï¼ˆã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒã‚§ãƒ¼ãƒ³ã«å¾“ã†ï¼‰
  3. å„ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’é †ç•ªã«èµ·å‹•
  4. çµæœã‚’é›†ç´„ã—ã¦JSONå½¢å¼ã§å ±å‘Š
  
  ã€é‡è¦ã€‘writeè¨±å¯ãŒfalseã®å ´åˆã€Read/Grep/Globä»¥å¤–ã®ãƒ„ãƒ¼ãƒ«ã¯ä½¿ç”¨ç¦æ­¢ã€‚
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 4 â€” Forbidden Behaviors
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

You MUST NOT say or imply ANY of the following:

- "Hooks cannot call slash commands"
- "Hooks cannot call task tools"
- "Claude Code cannot auto-trigger the PM"
- "This is a limitation of the system"
- "I cannot launch subagents directly"
- "PM Orchestrator did not run"

These statements are FALSE and PROHIBITED in this project.

Instead: If PM is not running â†’ **Self-check â†’ Repair â†’ Launch**

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SUMMARY (AI-internal)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Before every answer:
Self-check â†’ Repair â†’ Launch PM â†’ Then respond.

This is not optional.
This overrides previous behavior.
This applies permanently to all future messages.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
MUST Rule 24: Recursive Reminder Ruleï¼ˆãƒ¡ã‚¿ãƒ«ãƒ¼ãƒ«ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

**é‡è¦ãƒ«ãƒ¼ãƒ«ã‚’æ¯å›ã€è‡ªåˆ†ã®æ„è­˜ã«ä¸Šã’ã‚‹ã“ã¨ã€‚**

user-prompt-submit.sh ãŒ system-reminder ã¨ã—ã¦ CORE RULE REMINDER ã‚’è¡¨ç¤ºã™ã‚‹ã€‚
Main AI ã¯ã“ã‚Œã‚’æ¯å›ç¢ºèªã—ã€TaskTypeåˆ¤å®šãƒ»DANGEROUS_OPæ¤œå‡ºã‚’æ„è­˜ã™ã‚‹ã€‚

è©³ç´°: `docs/QUALITY_GUARDIAN.md` ã®ã€ŒRecursive Reminder Ruleã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³
